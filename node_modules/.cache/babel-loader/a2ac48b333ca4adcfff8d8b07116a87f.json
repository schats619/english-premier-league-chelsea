{"ast":null,"code":"var _jsxFileName = \"/Users/souravchatterjee/english-premier-league/src/components/application-header/ApplicationHeader.tsx\";\n\n/* eslint-disable react/display-name */\nimport { Component, default as React } from \"react\";\nimport { ListItemIcon, ListItemText } from \"@material-ui/core\";\nimport { withRouter } from \"react-router-dom\";\nimport { createStyles, fade, withStyles } from \"@material-ui/core/styles\";\nimport { AbilityContext } from \"../../context/abilityContext\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport AppBar from \"@material-ui/core/AppBar\"; // import AuthenticationService from \"../../services/auth/AuthenticationService\";\n// import ExternalLink from \"../external-link/ExternalLink\";\n\nimport { FormattedMessage } from \"react-intl\";\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport OpenInNewIcon from \"@material-ui/icons/OpenInNew\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport _ from \"lodash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst drawerWidth = 240;\n\nconst styles = theme => {\n  return createStyles({\n    grow: {\n      flexGrow: 1\n    },\n    appBar: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"100%\"\n      },\n      position: \"absolute\"\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0\n    },\n    drawerPaper: {\n      top: \"65px\",\n      width: drawerWidth,\n      background: \"lightgrey\"\n    },\n    menuButton: {\n      marginRight: theme.spacing(2)\n    },\n    title: {\n      display: \"none\",\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"block\"\n      }\n    },\n    search: {\n      position: \"relative\",\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25)\n      },\n      marginLeft: 0,\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: theme.spacing(1),\n        width: \"auto\"\n      }\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    inputRoot: {\n      color: \"inherit\"\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: 200,\n        \"&:focus\": {\n          width: 400\n        }\n      }\n    },\n    sectionDesktop: {\n      display: \"none\",\n      [theme.breakpoints.up(\"md\")]: {\n        display: \"flex\"\n      }\n    },\n    sectionMobile: {\n      display: \"flex\",\n      [theme.breakpoints.up(\"md\")]: {\n        display: \"none\"\n      }\n    },\n    list: {\n      width: 300\n    },\n    listItems: {\n      paddingLeft: theme.spacing(2),\n      color: \"black\"\n    },\n    listIcon: {\n      justifyContent: \"end\",\n      minWidth: 15,\n      paddingLeft: 10\n    },\n    openInNewIcon: {\n      fontSize: \"large\"\n    }\n  });\n};\n\nclass ApplicationHeader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = void 0;\n\n    this.handleProfileMenuOpen = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleHelpMenuOpen = event => {\n      this.setState({\n        helpAnchorEl: event.currentTarget\n      });\n    };\n\n    this.handleMobileMenuClose = () => {\n      this.setState({\n        mobileMoreAnchorEl: null\n      });\n    };\n\n    this.handleMenuClose = () => {\n      this.setState({\n        anchorEl: null\n      });\n      this.handleMobileMenuClose();\n    };\n\n    this.handleHelpMenuClose = () => {\n      this.setState({\n        helpAnchorEl: null\n      });\n    };\n\n    this.handleAccount = () => {\n      const {\n        history\n      } = this.props;\n      this.handleMenuClose();\n      history.push(\"/account\");\n    };\n\n    this.isAuthorizeToAccessAdminPage = contextValue => {\n      const manageAbilities = [{\n        abilityName: \"users\",\n        actionName: \"create\"\n      }, {\n        abilityName: \"users\",\n        actionName: \"update\"\n      }, {\n        abilityName: \"users\",\n        actionName: \"roleassignment\"\n      }, {\n        abilityName: \"users\",\n        actionName: \"delete\"\n      }, {\n        abilityName: \"roles\",\n        actionName: \"create\"\n      }, {\n        abilityName: \"roles\",\n        actionName: \"update\"\n      }, {\n        abilityName: \"roles\",\n        actionName: \"delete\"\n      }, {\n        abilityName: \"adminreports\",\n        actionName: \"read\"\n      }, {\n        abilityName: \"security\",\n        actionName: \"manage\"\n      }];\n      return _.some(manageAbilities, abilityProp => {\n        return contextValue.can(abilityProp.actionName, abilityProp.abilityName);\n      });\n    };\n\n    this.handleAdmin = () => {\n      const {\n        history\n      } = this.props;\n      this.handleMenuClose();\n      history.push(\"/admin\");\n    };\n\n    this.handleLogout = () => {\n      const {\n        history\n      } = this.props; // AuthenticationService.logout()\n      //   .then(() => {\n      //     history.push(\"/login\");\n      //   })\n      //   .catch(() => {\n      //     history.push(\"/login\");\n      //   });\n    };\n\n    this.handleAbout = () => {\n      const {\n        history\n      } = this.props;\n      this.handleHelpMenuClose();\n      history.push(\"/about\");\n    };\n\n    this.handleMobileMenuOpen = event => {\n      this.setState({\n        mobileMoreAnchorEl: event.currentTarget\n      });\n    };\n\n    this.state = {\n      anchorEl: null,\n      helpAnchorEl: null,\n      mobileMoreAnchorEl: null\n    };\n  }\n\n  getMenu() {\n    const {\n      anchorEl\n    } = this.state;\n    const isMenuOpen = Boolean(anchorEl);\n    return /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      id: \"primary-search-account-menu\",\n      keepMounted: true,\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      open: isMenuOpen,\n      onClose: this.handleMenuClose,\n      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: this.handleAccount,\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"application.header.menu.account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AbilityContext.Consumer, {\n        children: contextValue => this.isAuthorizeToAccessAdminPage(contextValue) ? /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: this.handleAdmin,\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"application.header.menu.admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 15\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: this.handleLogout,\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"application.header.menu.logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this);\n  }\n\n  getHelpMenu() {\n    const {\n      classes\n    } = this.props;\n    const {\n      helpAnchorEl\n    } = this.state;\n    const isHelpMenuOpen = Boolean(helpAnchorEl);\n    const MuiMenuItem = /*#__PURE__*/React.forwardRef((props, ref) => {\n      return /*#__PURE__*/_jsxDEV(MenuItem, {\n        ref: ref,\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 14\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: helpAnchorEl,\n      anchorOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      id: \"primary-search-help-menu\",\n      keepMounted: true,\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      open: isHelpMenuOpen,\n      onClose: this.handleHelpMenuClose,\n      children: [/*#__PURE__*/_jsxDEV(ExternalLink, {\n        linkUrl: \"https://erwin.com/bookshelf/11.0BUPBookshelf/Content/Home.htm\",\n        onClose: this.handleHelpMenuClose,\n        component: MuiMenuItem,\n        children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"application.header.menu.help\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ListItemIcon, {\n          className: classes.listIcon,\n          children: /*#__PURE__*/_jsxDEV(OpenInNewIcon, {\n            className: classes.openInNewIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ExternalLink, {\n        linkUrl: \"https://community.erwin.com/category/bup-idea-wall\",\n        onClose: this.handleHelpMenuClose,\n        component: MuiMenuItem,\n        children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"application.header.menu.feedback\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ListItemIcon, {\n          className: classes.listIcon,\n          children: /*#__PURE__*/_jsxDEV(OpenInNewIcon, {\n            className: classes.openInNewIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: this.handleAbout,\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"application.header.menu.about\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this);\n  }\n\n  getMobileMenu() {\n    const {\n      mobileMoreAnchorEl\n    } = this.state;\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n    return /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: mobileMoreAnchorEl,\n      anchorOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      id: \"primary-search-account-menu-mobile\",\n      keepMounted: true,\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      open: isMobileMenuOpen,\n      onClose: this.handleMobileMenuClose,\n      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"help feedback about\",\n          color: \"inherit\",\n          children: /*#__PURE__*/_jsxDEV(HelpOutlineIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"application.header.menu.help\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: this.handleProfileMenuOpen,\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"account of current user\",\n          \"aria-controls\": \"primary-search-account-menu\",\n          \"aria-haspopup\": \"true\",\n          color: \"inherit\",\n          children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"application.header.menu.profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    const {\n      onNavMenuClick,\n      onNotificationsClick,\n      classes\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.grow,\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        className: classes.appBar,\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            edge: \"start\",\n            className: classes.menuButton,\n            color: \"inherit\",\n            \"aria-label\": \"open drawer\",\n            onClick: onNavMenuClick,\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.title,\n            variant: \"h6\",\n            noWrap: true,\n            children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n              id: \"application.name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.grow\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.sectionDesktop,\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"help feedback about\",\n              \"aria-controls\": \"primary-search-help-menu\",\n              \"aria-haspopup\": \"true\",\n              onClick: this.handleHelpMenuOpen,\n              color: \"inherit\",\n              children: /*#__PURE__*/_jsxDEV(HelpOutlineIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"account of current user\",\n              \"aria-controls\": \"primary-search-account-menu\",\n              \"aria-haspopup\": \"true\",\n              onClick: this.handleProfileMenuOpen,\n              color: \"inherit\",\n              children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.sectionMobile,\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"show more\",\n              \"aria-controls\": \"primary-search-account-menu-mobile\",\n              \"aria-haspopup\": \"true\",\n              onClick: this.handleMobileMenuOpen,\n              color: \"inherit\",\n              children: /*#__PURE__*/_jsxDEV(MoreIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this), this.getMobileMenu(), this.getMenu(), this.getHelpMenu()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default withRouter(withStyles(styles)(ApplicationHeader));","map":{"version":3,"sources":["/Users/souravchatterjee/english-premier-league/src/components/application-header/ApplicationHeader.tsx"],"names":["Component","default","React","ListItemIcon","ListItemText","withRouter","createStyles","fade","withStyles","AbilityContext","AccountCircle","AppBar","FormattedMessage","HelpOutlineIcon","IconButton","Menu","MenuIcon","MenuItem","MoreIcon","OpenInNewIcon","Toolbar","Typography","_","drawerWidth","styles","theme","grow","flexGrow","appBar","breakpoints","up","width","position","drawer","flexShrink","drawerPaper","top","background","menuButton","marginRight","spacing","title","display","search","borderRadius","shape","backgroundColor","palette","common","white","marginLeft","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","padding","transition","transitions","create","sectionDesktop","sectionMobile","list","listItems","paddingLeft","listIcon","minWidth","openInNewIcon","fontSize","ApplicationHeader","constructor","props","state","handleProfileMenuOpen","event","setState","anchorEl","currentTarget","handleHelpMenuOpen","helpAnchorEl","handleMobileMenuClose","mobileMoreAnchorEl","handleMenuClose","handleHelpMenuClose","handleAccount","history","push","isAuthorizeToAccessAdminPage","contextValue","manageAbilities","abilityName","actionName","some","abilityProp","can","handleAdmin","handleLogout","handleAbout","handleMobileMenuOpen","getMenu","isMenuOpen","Boolean","vertical","horizontal","getHelpMenu","classes","isHelpMenuOpen","MuiMenuItem","forwardRef","ref","getMobileMenu","isMobileMenuOpen","render","onNavMenuClick","onNotificationsClick"],"mappings":"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","sourcesContent":["/* eslint-disable react/display-name */\nimport { Component, default as React } from \"react\";\nimport { ListItemIcon, ListItemText } from \"@material-ui/core\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport {\n  Theme,\n  WithStyles,\n  createStyles,\n  fade,\n  withStyles,\n} from \"@material-ui/core/styles\";\n\nimport { AbilityContext } from \"../../context/abilityContext\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport AppBar from \"@material-ui/core/AppBar\";\n// import AuthenticationService from \"../../services/auth/AuthenticationService\";\n// import ExternalLink from \"../external-link/ExternalLink\";\nimport { FormattedMessage } from \"react-intl\";\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport OpenInNewIcon from \"@material-ui/icons/OpenInNew\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport _ from \"lodash\";\n\nconst drawerWidth = 240;\n\nconst styles = (theme: Theme) => {\n  return createStyles({\n    grow: {\n      flexGrow: 1,\n    },\n    appBar: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"100%\",\n      },\n      position: \"absolute\",\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n    drawerPaper: {\n      top: \"65px\",\n      width: drawerWidth,\n      background: \"lightgrey\",\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      display: \"none\",\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"block\",\n      },\n    },\n    search: {\n      position: \"relative\",\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      marginLeft: 0,\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: theme.spacing(1),\n        width: \"auto\",\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: 200,\n        \"&:focus\": {\n          width: 400,\n        },\n      },\n    },\n    sectionDesktop: {\n      display: \"none\",\n      [theme.breakpoints.up(\"md\")]: {\n        display: \"flex\",\n      },\n    },\n    sectionMobile: {\n      display: \"flex\",\n      [theme.breakpoints.up(\"md\")]: {\n        display: \"none\",\n      },\n    },\n    list: {\n      width: 300,\n    },\n    listItems: {\n      paddingLeft: theme.spacing(2),\n      color: \"black\",\n    },\n    listIcon: {\n      justifyContent: \"end\",\n      minWidth: 15,\n      paddingLeft: 10,\n    },\n    openInNewIcon: {\n      fontSize: \"large\",\n    },\n  });\n};\n\ninterface ApplicationHeaderProps\n  extends WithStyles<typeof styles>,\n    RouteComponentProps {\n  onNavMenuClick: () => void;\n  onNotificationsClick: () => void;\n}\n\ninterface ApplicationHeaderState {\n  anchorEl: HTMLElement | null;\n  helpAnchorEl: HTMLElement | null;\n  mobileMoreAnchorEl: HTMLElement | null;\n}\n\nclass ApplicationHeader extends Component<\n  ApplicationHeaderProps,\n  ApplicationHeaderState\n> {\n  state: ApplicationHeaderState;\n\n  constructor(props: ApplicationHeaderProps) {\n    super(props);\n\n    this.state = {\n      anchorEl: null,\n      helpAnchorEl: null,\n      mobileMoreAnchorEl: null,\n    };\n  }\n\n  getMenu() {\n    const { anchorEl } = this.state;\n    const isMenuOpen = Boolean(anchorEl);\n\n    return (\n      <Menu\n        anchorEl={anchorEl}\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        id=\"primary-search-account-menu\"\n        keepMounted\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        open={isMenuOpen}\n        onClose={this.handleMenuClose}\n      >\n        <MenuItem onClick={this.handleAccount}>\n          <FormattedMessage id=\"application.header.menu.account\" />\n        </MenuItem>\n        <AbilityContext.Consumer>\n          {(contextValue: any) =>\n            this.isAuthorizeToAccessAdminPage(contextValue) ? (\n              <MenuItem onClick={this.handleAdmin}>\n                <FormattedMessage id=\"application.header.menu.admin\" />\n              </MenuItem>\n            ) : null\n          }\n        </AbilityContext.Consumer>\n        <MenuItem onClick={this.handleLogout}>\n          <FormattedMessage id=\"application.header.menu.logout\" />\n        </MenuItem>\n      </Menu>\n    );\n  }\n\n  getHelpMenu() {\n    const { classes } = this.props;\n    const { helpAnchorEl } = this.state;\n    const isHelpMenuOpen = Boolean(helpAnchorEl);\n\n    const MuiMenuItem = React.forwardRef<any, any>((props, ref) => {\n      return <MenuItem ref={ref} {...props} />;\n    });\n\n    return (\n      <Menu\n        anchorEl={helpAnchorEl}\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        id=\"primary-search-help-menu\"\n        keepMounted\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        open={isHelpMenuOpen}\n        onClose={this.handleHelpMenuClose}\n      >\n        <ExternalLink\n          linkUrl=\"https://erwin.com/bookshelf/11.0BUPBookshelf/Content/Home.htm\"\n          onClose={this.handleHelpMenuClose}\n          component={MuiMenuItem}\n        >\n          <ListItemText>\n            <FormattedMessage id=\"application.header.menu.help\" />\n          </ListItemText>\n          <ListItemIcon className={classes.listIcon}>\n            <OpenInNewIcon className={classes.openInNewIcon} />\n          </ListItemIcon>\n        </ExternalLink>\n        <ExternalLink\n          linkUrl=\"https://community.erwin.com/category/bup-idea-wall\"\n          onClose={this.handleHelpMenuClose}\n          component={MuiMenuItem}\n        >\n          <ListItemText>\n            <FormattedMessage id=\"application.header.menu.feedback\" />\n          </ListItemText>\n          <ListItemIcon className={classes.listIcon}>\n            <OpenInNewIcon className={classes.openInNewIcon} />\n          </ListItemIcon>\n        </ExternalLink>\n        <MenuItem onClick={this.handleAbout}>\n          <FormattedMessage id=\"application.header.menu.about\" />\n        </MenuItem>\n      </Menu>\n    );\n  }\n\n  getMobileMenu() {\n    const { mobileMoreAnchorEl } = this.state;\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n    return (\n      <Menu\n        anchorEl={mobileMoreAnchorEl}\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        id=\"primary-search-account-menu-mobile\"\n        keepMounted\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        open={isMobileMenuOpen}\n        onClose={this.handleMobileMenuClose}\n      >\n        <MenuItem>\n          <IconButton aria-label=\"help feedback about\" color=\"inherit\">\n            <HelpOutlineIcon />\n          </IconButton>\n          <p>\n            <FormattedMessage id=\"application.header.menu.help\" />\n          </p>\n        </MenuItem>\n        <MenuItem onClick={this.handleProfileMenuOpen}>\n          <IconButton\n            aria-label=\"account of current user\"\n            aria-controls=\"primary-search-account-menu\"\n            aria-haspopup=\"true\"\n            color=\"inherit\"\n          >\n            <AccountCircle />\n          </IconButton>\n          <p>\n            <FormattedMessage id=\"application.header.menu.profile\" />\n          </p>\n        </MenuItem>\n      </Menu>\n    );\n  }\n\n  handleProfileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    this.setState({\n      anchorEl: event.currentTarget,\n    });\n  };\n\n  handleHelpMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    this.setState({\n      helpAnchorEl: event.currentTarget,\n    });\n  };\n\n  handleMobileMenuClose = () => {\n    this.setState({\n      mobileMoreAnchorEl: null,\n    });\n  };\n\n  handleMenuClose = () => {\n    this.setState({\n      anchorEl: null,\n    });\n    this.handleMobileMenuClose();\n  };\n\n  handleHelpMenuClose = () => {\n    this.setState({\n      helpAnchorEl: null,\n    });\n  };\n\n  handleAccount = () => {\n    const { history } = this.props;\n    this.handleMenuClose();\n    history.push(\"/account\");\n  };\n\n  isAuthorizeToAccessAdminPage = (contextValue: any) => {\n    const manageAbilities = [\n      {\n        abilityName: \"users\",\n        actionName: \"create\",\n      },\n      {\n        abilityName: \"users\",\n        actionName: \"update\",\n      },\n      {\n        abilityName: \"users\",\n        actionName: \"roleassignment\",\n      },\n      {\n        abilityName: \"users\",\n        actionName: \"delete\",\n      },\n      {\n        abilityName: \"roles\",\n        actionName: \"create\",\n      },\n      {\n        abilityName: \"roles\",\n        actionName: \"update\",\n      },\n      {\n        abilityName: \"roles\",\n        actionName: \"delete\",\n      },\n      {\n        abilityName: \"adminreports\",\n        actionName: \"read\",\n      },\n      {\n        abilityName: \"security\",\n        actionName: \"manage\",\n      },\n    ];\n    return _.some(manageAbilities, (abilityProp) => {\n      return contextValue.can(abilityProp.actionName, abilityProp.abilityName);\n    });\n  };\n\n  handleAdmin = () => {\n    const { history } = this.props;\n    this.handleMenuClose();\n    history.push(\"/admin\");\n  };\n\n  handleLogout = () => {\n    const { history } = this.props;\n    // AuthenticationService.logout()\n    //   .then(() => {\n    //     history.push(\"/login\");\n    //   })\n    //   .catch(() => {\n    //     history.push(\"/login\");\n    //   });\n  };\n\n  handleAbout = () => {\n    const { history } = this.props;\n    this.handleHelpMenuClose();\n    history.push(\"/about\");\n  };\n\n  handleMobileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    this.setState({\n      mobileMoreAnchorEl: event.currentTarget,\n    });\n  };\n\n  render() {\n    const { onNavMenuClick, onNotificationsClick, classes } = this.props;\n\n    return (\n      <div className={classes.grow}>\n        <AppBar position=\"static\" className={classes.appBar}>\n          <Toolbar>\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={onNavMenuClick}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Typography className={classes.title} variant=\"h6\" noWrap>\n              <FormattedMessage id=\"application.name\" />\n            </Typography>\n            <div className={classes.grow} />\n            <div className={classes.sectionDesktop}>\n              <IconButton\n                aria-label=\"help feedback about\"\n                aria-controls=\"primary-search-help-menu\"\n                aria-haspopup=\"true\"\n                onClick={this.handleHelpMenuOpen}\n                color=\"inherit\"\n              >\n                <HelpOutlineIcon />\n              </IconButton>\n              <IconButton\n                edge=\"end\"\n                aria-label=\"account of current user\"\n                aria-controls=\"primary-search-account-menu\"\n                aria-haspopup=\"true\"\n                onClick={this.handleProfileMenuOpen}\n                color=\"inherit\"\n              >\n                <AccountCircle />\n              </IconButton>\n            </div>\n            <div className={classes.sectionMobile}>\n              <IconButton\n                aria-label=\"show more\"\n                aria-controls=\"primary-search-account-menu-mobile\"\n                aria-haspopup=\"true\"\n                onClick={this.handleMobileMenuOpen}\n                color=\"inherit\"\n              >\n                <MoreIcon />\n              </IconButton>\n            </div>\n          </Toolbar>\n        </AppBar>\n        {this.getMobileMenu()}\n        {this.getMenu()}\n        {this.getHelpMenu()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withStyles(styles)(ApplicationHeader));\n"]},"metadata":{},"sourceType":"module"}